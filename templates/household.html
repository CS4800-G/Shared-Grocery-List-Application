<!DOCTYPE html>
<html>
<head>
    <title>{{ household.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h1>{{ household.name }}</h1>

<p>
    <strong>Join Code:</strong>
    <code>{{ join_code }}</code>
</p>

<p>Welcome, {{ user }}</p>

<form action="{{ url_for('analytics') }}" method="get">
    <button type="submit">Analytics</button>
</form>

<h2>Lists</h2>
<form method="POST">
    <input type="text" name="new_list" placeholder="New list name">
    <button type="submit">Create List</button>
</form>

<ul>
    {% for name in lists.keys() %}
        <li>
            <form method="POST" style="display:inline;">
                <button type="submit" name="switch_list" value="{{ name }}">
                    {{ name }}
                </button>
            </form>
        </li>
    {% endfor %}
</ul>

<h2>Current List: {{ current_list }}</h2>

<form method="POST">
    <input type="text" name="name" placeholder="Item name" required>
    <input type="number" name="quantity" placeholder="Qty" min="1" required>
    <input type="number" step="0.01" name="price" placeholder="Price" required>
    <button type="submit">Add Item</button>
</form>

<ul>
    {% for item in items %}
        <li>
            {{ item.name }} (x{{ item.quantity }}) â€”
            ${{ "%.2f"|format(item.price) }}
            | Added by {{ item.added_by }}

            <form method="POST"
                  action="{{ url_for('delete_item_route') }}"
                  style="display:inline;">
                <input type="hidden" name="item_index" value="{{ loop.index0 }}">
                <button type="submit">Delete</button>
            </form>
        </li>
    {% endfor %}
</ul>

<h3>Cost Breakdown</h3>
<ul>
    {% for user, total in totals.items() %}
        <li>{{ user }}: ${{ "%.2f"|format(total) }}</li>
    {% endfor %}
</ul>

</body>
</html>
