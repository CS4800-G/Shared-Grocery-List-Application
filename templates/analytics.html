<!DOCTYPE html>
<html>
<head>
    <title>{{ household.name }} — Analytics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>{{ household.name }} — Analytics</h1>
    <p>Join Code: {{ household.join_code }}</p>

    <a href="{{ url_for('household') }}">← Back to Grocery Lists</a>

    <hr>

    <h2>Overview</h2>
    <ul>
        <li>Total items purchased: {{ analytics.total_items }}</li>
        <li>Total spend: ${{ "%.2f"|format(analytics.total_spend) }}</li>
    </ul>

    <hr>

    <h2>Total Spend by User</h2>
    <ul>
        {% for user, total in analytics.totals_by_user.items() %}
            <li>{{ user }}: ${{ "%.2f"|format(total) }}</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Total Spend by List</h2>
    <ul>
        {% for list_name, total in analytics.totals_by_list.items() %}
            <li>{{ list_name }}: ${{ "%.2f"|format(total) }}</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Top Items (by total cost)</h2>
    <ol>
        {% for name, total in analytics.top_items %}
            <li>{{ name }} — ${{ "%.2f"|format(total) }}</li>
        {% endfor %}
    </ol>
</body>
</html>